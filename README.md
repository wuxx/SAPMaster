# SAPMaster V1介绍
# 技术优势
- 极速烧写，本烧录方案使用400MHz CPU实现，烧写平均速度实测为32KB/s，远高于市场目前同等价位其他方案（其他方案一般使用的是stm32系列单片机实现烧录，主频72MHz，极限速度只有28KB/s），而且本方案后续还有更多性能功能优化空间。
- 操作简洁方便，PC侧不需要安装复杂繁琐的上位机程序，只需通过在线web界面勾选生成一个镜像对应的的文本配置文件，将镜像和配置文件存入SD卡中，将SD卡插入到烧录器中，重启烧录器，即可将烧录文件上传至烧录器内部存储器中。配置文件可以在线web界面中勾选选项生成，也可以将web页面下载到本地使用，或者自己手动编辑生成配置文件，因为配置文件只是一个文本文件，只需有单片机开发经验，即可完全理解配置文件内容。详细请点击 [CONFIG-BUILDER](https://wuxx.github.io/SAPMaster/) 
- 支持stm32全系列型号芯片烧录，具体如下：  
- [x]   stm32f0x  
- [x]   stm32f1x  
- [x]   stm32f2x  
- [x]   stm32f3x  
- [x]   stm32f4x  
- [x]   stm32f7x  
- [x]   stm32l0  
- [x]   stm32l4x  
- [x]   stm32h7x  
由于固件代码的优秀设计，更多型号只需少量修改即可轻松支持，您可将您的需求告知，我们的工程师为您持续提供技术支持。
- 支持两种烧录模式：手动按键烧录，以及自动烧录。自动烧录时，烧录器会在后台持续探测总线状态，当查询到目标正常连接后，完成烧录。
- 支持hex文件和bin文件烧录，下载次数限制，滚码写入，读保护。
- 镜像在烧录器内使用AES加密算法加密保存在非易失存储中，严格保证镜像的安全性。
- 使用蜂鸣器和RGB LED三色灯双重提示系统状态，简单易用。
- 支持固件升级，只需将新固件拷贝至SD卡中，将SD卡插入到烧录器中，重启烧录器，等待片刻，即可完成固件升级，固件发布在本github中，您可随时查询最新固件以及更多的功能。

# 使用场景说明
## 系统启动
烧录器通过USB方口数据线连接，USB方口数据线对烧录器仅提供5V的供电电源，对于某些不方便取电的场景，您可以使用便携电源通过USB对烧录器进行供电，以进行烧录工作。
烧录器上电数秒之后，您可观察到LED灯开始白灯闪烁，此为烧录程序正在初始化，数秒后，蓝灯缓慢闪烁，即表明烧录器处于就绪状态，随时可以进行烧录工作。
## 镜像上传
您需要准备两个文件：1. 镜像文件 2. 镜像对应的配置文件， 来将镜像上传至烧录器内部存储中。您需要编辑一个和镜像同名的配置文件，假若镜像名为abc.hex，则配置文件名为abc.json，烧录器侧面有一SD卡槽，用于完成镜像上传以及固件升级，配置文件可以在线生成，也可自己手动编辑，详细请点击 [配置文件生成器](https://wuxx.github.io/SAPMaster/)。
将镜像和对应的配置文件放置在SD卡根目录，若根目录下存在多个镜像及配置文件，烧录器会选择按照字母排序最前的镜像进行上传，建议在根目录下只存放一个镜像进行上传。


## 镜像烧录
烧录器支持两种烧录模式：手动烧录与自动烧录，手动烧录模式下，按一次按键则进行一次烧录；自动烧录模式下，烧录器会持续探测总线，当检测到目标后执行一次烧录动作，请注意检测到目标后，烧录动作只会执行一次，烧录完成后，烧录器会等待目标和烧录器脱离，
## 固件升级
最新的烧录器固件会有性能和功能上的优化更新，若有需要，请在本git仓库的firmware目录中下载，将固件存入SD卡中（固件名需为sap.bin），将SD卡插入烧录器卡槽中，重启烧录器，观察指示灯和蜂鸣器状态即可。


# 蜂鸣器 & RGB LED状态说明

蜂鸣器 | 说明
---|---
==一声== | ==镜像烧录成功==
==二声== | ==新镜像上传成功==
三声 | 镜像烧录失败
四声 | SD卡中的配置文件非法
五声 | SD卡中无有效镜像或者镜像非法
六声 | 烧录器中无有效镜像
七声 | 镜像下载次数已经耗尽
八声 | 其他未知错误


RGB LED   | 整体说明| 场景说明
---       |---      |---      |
白灯闪烁  | 系统正在工作      |系统正在启动/正在烧录镜像
绿灯闪烁  | 成功    | 镜像烧录成功/新镜像上传成功
蓝灯缓慢闪烁|系统就绪，随时可以进行烧写|
红灯闪烁  | 失败    | 烧录失败/新镜像上传失败|
白灯长亮  | 固件正在升级|
绿灯常亮5s|固件升级成功
红灯常亮5s|固件升级失败